{% load i18n %}

<div
  class="card mx-auto"
  style="margin-top: 60px" >
  <div class="card-header">
    <h3>{% translate 'Tasks' %}</h3>
  </div>
  <div class="card-body">
    <a class="btn btn-secondary"
      hx-get="{% url 'djupkeep:task_calendar' %}"
      hx-target="#content"
      hx-push-url="true">
      {% trans "Back to calendar" %}
    </a>
    <a class="btn btn-danger"
      hx-include="#checked-tasks"
      {% if year %}
        hx-get="{% url 'djupkeep:task_list_refresh' %}?year={{ year }}&month={{ month }}&delete=true"
      {% else %}
        hx-get="{% url 'djupkeep:task_list_refresh' %}&delete=true"
      {% endif %}
      hx-target="#task-list">
      {% trans "Delete checked tasks" %}
    </a>
    <form id="checked-tasks">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">{% trans "Element" %}</th>
            <th scope="col">{% trans "Activity" %}</th>
            <th scope="col">{% trans "Maintainer" %}</th>
            <th scope="col">{% trans "Due date" %}</th>
            <th scope="col">{% trans "Check date" %}</th>
            <th scope="col">{% trans "Notes" %}</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody id="task-list"
          {% if year %}
            hx-get="{% url 'djupkeep:task_list_refresh' %}?year={{ year }}&month={{ month }}"
          {% else %}
            hx-get="{% url 'djupkeep:task_list_refresh' %}"
          {% endif %}
          hx-trigger="refreshTaskList from:body">
          {% include "djupkeep/tasks/htmx/list_refresh.html" %}
        </tbody>
      </table>
    </form>
  </div>
</div>
