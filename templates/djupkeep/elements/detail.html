{% extends "djupkeep/locations/base_detail.html" %}
{% load static %}
{% load i18n %}
{% load leaflet_tags %}
{% load geojson_tags %}
{% load fb_versions %}

{% block content %}
  <div class="card mx-auto" style="margin-top: 15px">
    <div class="card-header">
      <h3>{% translate 'Element' %}: {{ object }}</h3>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col">
          {% if object.fb_image %}
            <img
              src="{% version object.fb_image 'popup' %}"
              alt="{{ object.intro }}" />
          {% endif %}
          <p class="card-text">{{ object.intro }}</p>
          <ul>
            <li>{% trans "Location" %}: {{ object.location }}</li>
            <li>{% trans "Category" %}: {{ object.category }}</li>
          </ul>
        </div>
        <div class="col col-xl-8 col-lg-8 col-md-12 col-sm-12 col-12">
          <script src="{% static 'djupkeep/js/location_detail.js'%}"></script>
          {% leaflet_map "mymap" callback="window.map_init" %}
        </div>
      </div>
    </div>
    <div class="card-footer">
      <a class="btn btn-primary" style="margin-bottom: 15px"
        href="{% url 'djupkeep:element_update' pk=object.id %}">
        {% trans "Modify" %}
      </a>
      <div class="dropdown">
        <a class="btn btn-secondary dropdown-toggle"
          href="#"
          role="button"
          id="dropdownMenuLink"
          data-bs-toggle="dropdown"
          aria-expanded="false">
          {% trans "Other actions" %}
        </a>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
          <li>
            <a class="dropdown-item"
              href="{% url 'djupkeep:location_detail' pk=location.id %}">
              {% trans "Back to location" %}
            </a>
          </li>
          <li>
            <a class="dropdown-item"
              hx-get="{% url 'djupkeep:location_list' %}"
              hx-target="#content"
              hx-push-url="true">
              {% trans "Back to element list" %}
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  {% include "djupkeep/locations/includes/update_data.html" %}
  <script id="marker_data" type="application/json">{{ object|geojsonfeature:"popupContent"|safe }}</script>
  {{ category_list|json_script:"layer_data" }}
{% endblock content %}
